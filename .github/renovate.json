{
	"$schema": "https://docs.renovatebot.com/renovate-schema.json",
	"extends": [
		"config:base",
		":timezone(Asia/Tokyo)",
		"group:allNonMajor",
		":separateMajorReleases",
		":combinePatchMinorReleases",
		":ignoreUnstable",
		":prImmediately",
		":semanticCommits",
		":semanticPrefixChore",
		":updateNotScheduled",
		":automergeMinor",
		":automergePr",
		":automergeRequireAllStatusChecks",
		":disableRateLimiting",
		":enableVulnerabilityAlertsWithLabel(security)",
		":labels(renovate,maintenance-bot)"
	],
	"baseBranches": ["main"],
	"stabilityDays": 3,
	"enabledManagers": ["npm", "dockerfile", "docker-compose", "github-actions", "regex"],
	"regexManagers": [
    {
      "fileMatch": ["^\\config/docker/[^/]+\\.sh$"],
      "matchStrings": [
        "datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\sexport .*?_VERSION=(?<currentValue>.*)\\s"
      ],
      "versioningTemplate": "{{#if versioning}}{{versioning}}{{else}}semver{{/if}}"
    },
    {
      "fileMatch": ["^Dockerfile$"],
      "matchStrings": [
        "ARG IMAGE=(?<depName>.*?):(?<currentValue>.*?)@(?<currentDigest>sha256:[a-f0-9]+)s"
      ],
      "datasourceTemplate": "docker"
    }
  ],
	"npm": {
		"extends": [
			"group:monorepos",
			"group:definitelyTyped",
			"group:jsUnitTestNonMajor",
			"github>hatena/renovate-config:groupLinters",
			":ignoreModulesAndTests",
			"helpers:disableTypesNodeMajor"
		],
		"rangeStrategy": "bump",
		"postUpdateOptions": [
			"yarnDedupeHighest"
		],
		"lockFileMaintenance": {
			"enabled": true,
			"recreateClosed": true,
			"branchTopic": "lock-file-maintenance",
			"commitMessageAction": "Lock file maintenance",
			"prBodyDefinitions": {
				"Change": "All locks refreshed"
			},
			"rebaseWhen": "behind-base-branch",
			"schedule": [
				"at any time"
			]
		}
	}
}
